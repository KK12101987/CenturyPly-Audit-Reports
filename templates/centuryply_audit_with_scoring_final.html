
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CenturyPly â€” QA Scorecard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{--accent:#b41f23;}
    body{font-family:Inter,system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f6f7f9;}
    .topbar{background:var(--accent); color:white; padding:10px 18px; display:flex; align-items:center; justify-content:space-between;}
    .logo-placeholder img{height:40px;}
    .card{border-radius:8px;}
    iframe{width:100%; height:calc(100vh - 76px); border:0;}
  </style>
</head>
<body>
  <div class="topbar">
    <div style="display:flex;align-items:center;gap:12px;">
      <div class="logo-placeholder"><img src="{{ url_for('static', filename='logo.png') }}" alt="Logo"></div>
      <div><h5 style="margin:0">CenturyPly â€” QA Scorecard</h5><small>Call Audit</small></div>
    </div>
    <div>
      <div class="btn-group me-2">
        <button class="btn btn-warning dropdown-toggle fw-bold" type="button" id="reportDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color:#b41f23;">
          ğŸ“Š Generate Report
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="reportDropdown">
          <li><a class="dropdown-item" href="#" onclick="generateReport('full')">ğŸ“˜ Full CenturyPly Audit Report</a></li>
          <li><a class="dropdown-item" href="#" onclick="generateReport('team')">ğŸ‘¥ Team-wise Report</a></li>
          <li><a class="dropdown-item" href="#" onclick="generateReport('rm')">ğŸ§‘â€ğŸ’¼ RM Performance Summary</a></li>
        </ul>
      </div>
      <button class="btn btn-light me-2" style="color:#b41f23;" onclick="runLegacy()">ğŸ§© Run Legacy</button>
      <button class="btn btn-outline-light" onclick="location.reload()">Reset</button>
    </div>
  </div>

  <iframe src="/scoring"></iframe>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
function generateReport(type){
  let url = "/generate_report?mode=" + (type || "full");
  if (confirm("Generate report: " + type + " ?")) window.location.href = url;
}
async function runLegacy(){
  const res = await fetch('/run_legacy', {method:'POST'});
  const j = await res.json();
  alert(j.output || j.message || '(no output)');
}
</script>
</body>
</html>
